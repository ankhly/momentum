(()=>{"use strict";let e="en";const t=document.querySelector(".time-main__time"),o=document.querySelector(".date-main__date"),n=new Date,a={month:"long",day:"numeric",weekday:"long"};function c(){const t=n.toLocaleDateString(`${e}`,a);o.innerHTML=t}!function e(){const o=(new Date).toLocaleTimeString();t.innerHTML=o,setTimeout(e,1e3),c()}();const i=document.querySelector(".welcome-main__welcome");let l,s,r,d=n.getHours();function u(e){return d>=18&&d<=23?(l={ru:"Добрый вечер",en:"Good evening"},s="evening",`${l[e]}`):d>=12&&d<=18?(l={ru:"Добрый день",en:"Good afternoon"},s="afternoon",`${l[e]}`):d>=6&&d<=12?(l={ru:"Доброе утро",en:"Good morning"},s="morning",`${l[e]}`):d>=0&&d<=6?(l={ru:"Доброй ночи",en:"Good night"},s="night",`${l[e]}`):void 0}var m,f;i.textContent=`${u(`${e}`)}`,m=1,f=20,m=Math.ceil(m),f=Math.floor(f),r=(Math.floor(Math.random()*(f-m+1))+m).toString().padStart(2,"0");const g=document.querySelector(".main-page");function v(){const e=new Image;e.src=`https://raw.githubusercontent.com/ankhly/stage1-tasks/assets/images/${s}/${r}.jpg`,e.onload=()=>{g.style.backgroundImage=`url(${e.src})`}}v();const S=document.querySelector(".arrow-slider__prev");document.querySelector(".arrow-slider__next").addEventListener("click",(function(){r=(1*r+1).toString().padStart(2,"0"),"21"===r&&(r="01"),v()})),S.addEventListener("click",(function(){r=(1*r-1).toString().padStart(2,"0"),"00"===r&&(r="20"),v()}));const y=document.querySelector(".welcome-main__name"),L=document.querySelector(".weather-main__city");function _(){return localStorage.getItem("name")&&(y.value=localStorage.getItem("name")),localStorage.getItem("city")?L.value=localStorage.getItem("city"):L.value="Minsk"}window.addEventListener("beforeunload",(function(){localStorage.setItem("name",y.value),localStorage.setItem("city",L.value)})),window.addEventListener("load",_);const w=document.querySelector(".weather-main__icon"),p=document.querySelector(".weather-main__temperature"),q=document.querySelector(".weather-main__wind"),h=document.querySelector(".weather-main__humidity"),I=document.querySelector(".weather-main__error");let $=`https://api.openweathermap.org/data/2.5/weather?q=${_()}&lang=${e}&appid=f9fce6792d9f006aca4edef4ec280573&units=metric`;async function k(){const t={ru:"Скорость ветра",en:"Wind speed"},o={ru:"Влажность",en:"Humidity"},n={ru:"Ошибка! Город не найден для",en:"Error! City not found for"},a={ru:"м/с",en:"m/s"};try{const n=await fetch($),c=await n.json();w.style.display="block",p.style.display="block",q.style.display="block",h.style.display="block",w.className="weather-main__icon owf",w.classList.add(`owf-${c.weather[0].id}`),p.textContent=`${Math.floor(c.main.temp)}°C, ${c.weather[0].description}.`,q.textContent=`${t[e]}: ${Math.ceil(c.wind.speed)} ${a[e]}.`,h.textContent=`${o[e]}: ${c.main.humidity} %.`,I.style.display="none"}catch{I.style.display="block",I.textContent=`${n[e]} '${L.value}'!`,w.style.display="none",p.style.display="none",q.style.display="none",h.style.display="none"}}function C(){$=`https://api.openweathermap.org/data/2.5/weather?q=${L.value}&lang=${e}&appid=f9fce6792d9f006aca4edef4ec280573&units=metric`,k()}k(),L.addEventListener("change",C);const E=document.querySelector(".quotes-main__text"),x=document.querySelector(".quotes-main__author"),b=document.querySelector(".quotes-main__btn");async function A(){const t=await fetch("files/quotes.json"),o=await t.json();let n;var a,c;a=0,c=o.length-1,a=Math.ceil(a),c=Math.floor(c),n=Math.floor(Math.random()*(c-a+1))+a,"ru"===e?(E.textContent=o[`${n}`].ruText,x.textContent=o[`${n}`].author):(E.textContent=o[`${n}`].text,x.textContent=o[`${n}`].author)}A(),b.addEventListener("click",(function(){A()}));const M={ru:"Введите ваше имя",en:"Enter name"},T={ru:"Введите город",en:"Enter city"},G=[{title:"Aqua Caelestis",src:"files/music/AquaCaelestis.mp3",duration:"00:58"},{title:"Ennio Morricone",src:"files/music/EnnioMorricone.mp3",duration:"01:37"},{title:"River Flows In You",src:"files/music/RiverFlowsInYou.mp3",duration:"01:37"},{title:"Summer Wind",src:"files/music/SummerWind.mp3",duration:"01:51"}],W=document.querySelector(".player-main__playlist");let j;G.forEach((function(e){j=document.createElement("li"),j.classList.add("player-main__item"),j.textContent=e.title,W.append(j)}));const D=document.querySelector(".controls-player__playstop"),H=document.querySelector(".controls-player__prew"),R=document.querySelector(".controls-player__next"),B=document.querySelectorAll(".player-main__item");let Y=!1,F=0;const P=new Audio;function Q(){P.src=G[`${F}`].src,B[`${F}`].classList.add("active"),P.currentTime=0,Y?(P.pause(),Y=!1):(P.play(),Y=!0)}function U(){Y=!1,D.classList.add("pause"),B[`${F}`].classList.remove("active"),F==G.length-1?F=0:F++,Q()}P.addEventListener("ended",(function(){U()})),D.addEventListener("click",(function(){D.classList.toggle("pause"),Q()})),H.addEventListener("click",(function(){Y=!1,D.classList.add("pause"),B[`${F}`].classList.remove("active"),0==F?F=G.length-1:F--,Q()})),R.addEventListener("click",U);const J=document.querySelector(".btn-language__en"),N=document.querySelector(".btn-language__ru"),V=document.querySelector(".language-option__title"),X=document.querySelector(".weather-option__title"),z=document.querySelector(".player-option__title"),K=document.querySelector(".clock-option__title"),O=document.querySelector(".data-option__title"),Z=document.querySelector(".welcome-option__title"),ee=document.querySelector(".quotes-option__title");function te(){const t=localStorage.getItem("languageSave");"ru"===t&&(N.classList.add("active"),J.classList.remove("active"),e="ru",V.textContent="Язык:",X.textContent="Погода:",z.textContent="Аудиоплеер:",K.textContent="Время:",O.textContent="Дата:",Z.textContent="Приветствие:",ee.textContent="Цитаты:",i.textContent=`${u(`${e}`)}`,y.placeholder=`${M[e]}`,L.placeholder=`${T[e]}`,A(),c(),C()),"en"===t&&(N.classList.remove("active"),J.classList.add("active"),e="en",V.textContent="Language:",X.textContent="Weather:",z.textContent="Audio player:",K.textContent="Time:",O.textContent="Date:",Z.textContent="Greetings:",ee.textContent="Quotes:",i.textContent=`${u(`${e}`)}`,y.placeholder=`${M[e]}`,L.placeholder=`${T[e]}`,A(),c(),C())}J.classList.add("active"),N.addEventListener("click",(function(){const e=localStorage.getItem("languageSave");localStorage.setItem("languageSave","ru"===e?"en":"ru"),te()})),J.addEventListener("click",(function(){const e=localStorage.getItem("languageSave");localStorage.setItem("languageSave","en"===e?"ru":"en"),te()})),window.onload=te();const oe=document.querySelector(".settings-footer__icon"),ne=document.querySelector(".option-main");oe.addEventListener("click",(function(){ne.classList.toggle("active")}));const ae=document.querySelector(".btn-weather__on"),ce=document.querySelector(".btn-weather__off"),ie=document.querySelector(".weather-main");function le(){const e=localStorage.getItem("weather");"off"===e&&(ce.classList.add("active"),ae.classList.remove("active"),ie.classList.add("active")),"on"===e&&(ae.classList.add("active"),ce.classList.remove("active"),ie.classList.remove("active"))}ae.classList.add("active"),ae.addEventListener("click",(function(){const e=localStorage.getItem("weather");localStorage.setItem("weather","on"===e?"off":"on"),le()})),ce.addEventListener("click",(function(){const e=localStorage.getItem("weather");localStorage.setItem("weather","off"===e?"on":"off"),le()})),window.onload=le();const se=document.querySelector(".btn-player__on"),re=document.querySelector(".btn-player__off"),de=document.querySelector(".player-main");function ue(){const e=localStorage.getItem("audio");"off"===e&&(re.classList.add("active"),se.classList.remove("active"),de.classList.add("active")),"on"===e&&(se.classList.add("active"),re.classList.remove("active"),de.classList.remove("active"))}se.classList.add("active"),se.addEventListener("click",(function(){const e=localStorage.getItem("audio");localStorage.setItem("audio","on"===e?"off":"on"),ue()})),re.addEventListener("click",(function(){const e=localStorage.getItem("audio");localStorage.setItem("audio","off"===e?"on":"off"),ue()})),window.onload=ue();const me=document.querySelector(".btn-clock__on"),fe=document.querySelector(".btn-clock__off"),ge=document.querySelector(".time-main");function ve(){const e=localStorage.getItem("time");"off"===e&&(fe.classList.add("active"),me.classList.remove("active"),ge.classList.add("active")),"on"===e&&(me.classList.add("active"),fe.classList.remove("active"),ge.classList.remove("active"))}me.classList.add("active"),me.addEventListener("click",(function(){const e=localStorage.getItem("time");localStorage.setItem("time","on"===e?"off":"on"),ve()})),fe.addEventListener("click",(function(){const e=localStorage.getItem("time");localStorage.setItem("time","off"===e?"on":"off"),ve()})),window.onload=ve();const Se=document.querySelector(".btn-data__on"),ye=document.querySelector(".btn-data__off"),Le=document.querySelector(".date-main");function _e(){const e=localStorage.getItem("date");"off"===e&&(ye.classList.add("active"),Se.classList.remove("active"),Le.classList.add("active")),"on"===e&&(Se.classList.add("active"),ye.classList.remove("active"),Le.classList.remove("active"))}Se.classList.add("active"),Se.addEventListener("click",(function(){const e=localStorage.getItem("date");localStorage.setItem("date","on"===e?"off":"on"),_e()})),ye.addEventListener("click",(function(){const e=localStorage.getItem("date");localStorage.setItem("date","off"===e?"on":"off"),_e()})),window.onload=_e();const we=document.querySelector(".btn-welcome__on"),pe=document.querySelector(".btn-welcome__off"),qe=document.querySelector(".welcome-main");function he(){const e=localStorage.getItem("welcome");"off"===e&&(pe.classList.add("active"),we.classList.remove("active"),qe.classList.add("active")),"on"===e&&(we.classList.add("active"),pe.classList.remove("active"),qe.classList.remove("active"))}we.addEventListener("click",(function(){const e=localStorage.getItem("welcome");localStorage.setItem("welcome","on"===e?"off":"on"),he()})),pe.addEventListener("click",(function(){const e=localStorage.getItem("welcome");localStorage.setItem("welcome","off"===e?"on":"off"),he()})),we.classList.add("active"),window.onload=he();const Ie=document.querySelector(".btn-quotes__on"),$e=document.querySelector(".btn-quotes__off"),ke=document.querySelector(".quotes-main");function Ce(){const e=localStorage.getItem("quotes");"off"===e&&($e.classList.add("active"),Ie.classList.remove("active"),ke.classList.add("active")),"on"===e&&(Ie.classList.add("active"),$e.classList.remove("active"),ke.classList.remove("active"))}Ie.addEventListener("click",(function(){const e=localStorage.getItem("quotes");localStorage.setItem("quotes","on"===e?"off":"on"),Ce()})),$e.addEventListener("click",(function(){const e=localStorage.getItem("quotes");localStorage.setItem("quotes","off"===e?"on":"off"),Ce()})),Ie.classList.add("active"),window.onload=Ce(),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();